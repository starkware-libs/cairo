//! > Test that accessing a member of a struct does not cause all the struct to be stored.

//! > test_runner_name
test_function_generator

//! > function
fn foo(a: Box<u256>) -> u128 {
    let val: u256 = a.unbox();
    val.high
}

//! > function_name
foo

//! > module_code

//! > semantic_diagnostics

//! > lowering_diagnostics

//! > sierra_gen_diagnostics

//! > sierra_code
label_test::foo::0:
unbox<core::integer::u256>([0]) -> ([1])
struct_deconstruct<core::integer::u256>([1]) -> ([2], [3])
drop<u128>([2]) -> ()
store_temp<u128>([3]) -> ([3])
return([3])

//! > ==========================================================================

//! > Test that boxing a member of a boxed struct does not do any copying.

//! > test_runner_name
test_function_generator(future_sierra:true)

//! > function
fn foo(a: Box<u256>) -> Box<u128> {
    let val: u256 = a.unbox();
    BoxTrait::new(val.high)
}

//! > function_name
foo

//! > module_code

//! > semantic_diagnostics

//! > lowering_diagnostics

//! > sierra_gen_diagnostics

//! > sierra_code
label_test::foo::0:
dup<Box<core::integer::u256>>([0]) -> ([0], [1])
unbox<core::integer::u256>([1]) -> ([2])
drop<core::integer::u256>([2]) -> ()
struct_boxed_deconstruct<core::integer::u256>([0]) -> ([3], [4])
drop<Box<u128>>([3]) -> ()
store_temp<Box<u128>>([4]) -> ([4])
return([4])
