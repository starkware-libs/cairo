//! > Test closure infer type from impl.

//! > test_runner_name
test_function_diagnostics(expect_diagnostics: true)

//! > function
fn foo() {
    let c = |a| {
        let d = a;
        d.into()
    };
    let _k: felt252 = bar(c);
    core::ops::FnOnce::call(c, (2_u64,))
}

//! > function_name
foo

//! > module_code
fn bar<T, +core::ops::FnOnce<T, (u32,)>>(c: T) -> core::ops::FnOnce::<T, (u32,)>::Output {
    core::ops::FnOnce::call(c, (2,))
}

//! > expected_diagnostics
error: Type mismatch: `core::integer::u64` and `core::integer::u32`.
 --> lib.cairo:4:10
fn foo() {
         ^
