:cairo-repo: https://github.com/starkware-libs/cairo/blob/main

= Array expressions

Array expressions construct array values directly in place.
They correspond to the `FixedSizeArray` expression in the Cairo syntax (see
link:{cairo-repo}/crates/cairo-lang-syntax-codegen/src/cairo_spec.rs[crates/cairo-lang-syntax-codegen/src/cairo_spec.rs], variant `ExprFixedSizeArray`).

== Syntax

Two forms are supported:

- List form: `[expr1, expr2, ..., exprN]`
- Repeat form: `[expr; size]`

Parsing follows the syntax spec:

- List form is an `ExprList` inside brackets with no size clause.
- Repeat form is a single `expr` followed by `;` and a `size` expression.

[NOTE]
====
Only one form is used at a time. Mixing both (e.g., `[a, b; 3]`) is not valid.
====

== Typing and semantics

- All elements must have the same type. The arrayâ€™s element type is that common type.
- In the list form, the array length is the number of elements provided.
- In the repeat form, the array length is given by `size` and the array is initialized by
  repeating the single element expression.
- The element expression in the repeat form is evaluated according to the languageâ€™s
  evaluation rules; refer to xref:expressions.adoc[Expressions] for general evaluation
  order. Do not rely on side effects being repeated unless guaranteed by the semantics of
  the expression and compiler.
- Empty arrays (`[]`) require type context to determine the element type. Where no such context
  exists, a type annotation is typically required.

[NOTE]
====
Indexing uses the general indexing expression form `array[index]`.
====

== Examples

[source,cairo]
----
// List form: explicit elements.
let xs = [1, 2, 3];

// Nested arrays.
let grid = [[1, 2], [3, 4]];

// Repeat form: repeat the element 0 four times.
let zeros = [0; 4];

// Empty array using list form [] with type annotation [felt252; 0].
// Note: [felt252; 0] is a type annotation syntax, not a repeat form expression.
let empty: [felt252; 0] = [];

----

Invalid examples (illustrative):

- Heterogeneous elements: `[1, true]`
- Mixed forms: `[1, 2; 3]`
- Repeat form with zero size: `[0; 0]` (size must be greater than 0)

== Related

- xref:expressions.adoc[Expressions]
- xref:array-types.adoc[Array types] (ðŸš§)
- xref:slice-types.adoc[Slice types] (ðŸš§)
- xref:tuple-expressions.adoc[Tuple expressions]
